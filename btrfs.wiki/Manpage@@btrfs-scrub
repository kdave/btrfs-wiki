=btrfs-scrub(8) manual page=
{{GeneratedManpage
|name=btrfs-scrub}}

==NAME==
btrfs-scrub - scrub btrfs filesystem, verify block checksums

==SYNOPSIS==

<p><b>btrfs scrub</b> <em>&lt;subcommand&gt;</em> <em>&lt;args&gt;</em></p>
==DESCRIPTION==

<p><b>btrfs scrub</b> is used to scrub a btrfs filesystem, which will read all data
and metadata blocks from all disks and verify checksums. Automatically repair
corrupted blocks if there&#8217;s a correct copy available.</p>
==SUBCOMMAND==

<dl>
<dt>
<b>cancel</b> <em>&lt;path&gt;</em>|<em>&lt;device&gt;</em>
<dd>
<p>
If a scrub is running on the filesystem identified by <em>path&gt;</em> cancel it.
</p>
<p>Progress is saved in the scrub progress file (<em>/var/lib/btrfs/scrub.status.UUID</em>)
and scrubbing can be resumed later using the <b>btrfs scrub resume</b> command.
If a <em>device</em> is specified, the corresponding filesystem is found and
<b>btrfs scrub cancel</b> behaves as if it was called on that filesystem.</p>

<dt>
<b>resume</b> [-BdqrR] [-c <em>&lt;ioprio_class&gt;</em> -n <em>&lt;ioprio_classdata&gt;</em>] <em>&lt;path&gt;</em>|<em>&lt;device&gt;</em>
<dd>
<p>
Resume a cancelled or interrupted scrub on the filesystem identified by
<em>path</em> or on a given <em>device</em>.
</p>
<p>Does not start a new scrub if the last scrub finished successfully.</p>
<p><tt>Options</tt></p>
<p>see <b>scrub start</b>.</p>

<dt>
<b>start</b> [-BdqrRf] [-c <em>&lt;ioprio_class&gt;</em> -n <em>&lt;ioprio_classdata&gt;</em>] <em>&lt;path&gt;</em>|<em>&lt;device&gt;</em>
<dd>
<p>
Start a scrub on all devices of the filesystem identified by <em>path</em> or on
a single <em>device</em>. If a scrub is already running, the new one fails.
</p>
<p>Without options, scrub is started as a background process.
Progress can be obtained with the <b>btrfs scrub status</b> command. Scrubbing
involves reading all data from all disks and verifying checksums. Errors are
corrected along the way if possible.</p>
<p>The default IO priority of scrub is the idle class. The priority can be
configured similar to the [http://man7.org/linux/man-pages/man1/ionice.1.html ionice(1)] syntax using <em>-c</em> and <em>-n</em> options.</p>
<p><tt>Options</tt></p>
<dl>
<dt>
-B
<dd>
<p>
do not background and print scrub statistics when finished
</p>

<dt>
-d
<dd>
<p>
print separate statistics for each device of the filesystem (<em>-B</em> only)
</p>

<dt>
-q
<dd>
<p>
be quiet, omit error messages and statistics
</p>

<dt>
-r
<dd>
<p>
read only mode, do not attempt to correct anything, can be run on a read-only
filesystem
</p>

<dt>
-R
<dd>
<p>
print raw statistics per-device instead of a summary
</p>

<dt>
-c <em>&lt;ioprio_class&gt;</em>
<dd>
<p>
set IO priority class (see [http://man7.org/linux/man-pages/man1/ionice.1.html ionice(1)] manpage)
</p>

<dt>
-n <em>&lt;ioprio_classdata&gt;</em>
<dd>
<p>
set IO priority classdata (see [http://man7.org/linux/man-pages/man1/ionice.1.html ionice(1)] manpage)
</p>

<dt>
-f
<dd>
<p>
force starting new scrub even if a scrub is already running,
this is useful when scrub status file is damaged and reports a running
scrub although it is not
</p>

</dl>

<dt>
<b>status</b> [-d] <em>&lt;path&gt;</em>|<em>&lt;device&gt;</em>
<dd>
<p>
Show status of a running scrub for the filesystem identified by <em>path</em> or
for the specified <em>device</em>.
</p>
<p>If no scrub is running, show statistics of the last finished or cancelled scrub
for that filesystem or device.</p>
<p><tt>Options</tt></p>
<dl>
<dt>
-d
<dd>
<p>
print separate statistics for each device of the filesystem
</p>

</dl>

</dl>
==EXIT STATUS==

<p><b>btrfs scrub</b> returns a zero exit status if it succeeds. Non zero is
returned in case of failure.</p>
==AVAILABILITY==

<p><b>btrfs</b> is part of btrfs-progs.
Please refer to the btrfs wiki http://btrfs.wiki.kernel.org for
further details.</p>
==SEE ALSO==

<p>[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]],</p>
[[Category:Manpage]]