
=btrfs-qgroup(8) Manual Page=
{{GeneratedManpage}}


==NAME==

btrfs-qgroup - control the quota group of a btrfs filesystem

==SYNOPSIS==

'''btrfs qgroup''' &lt;subcommand&gt; &lt;args&gt;

==DESCRIPTION==

'''btrfs qgroup''' is used to control quota group(qgroup) of a btrfs filesystem.

'''Note:''' To use qgroup, it needs to enable quota first using '''btrfs quota''' command.

'''Warning:''' Qgroup is not stable yet and will impact performance in current mainline kernel(v3.14 so far).

==QGROUP==

Quota group or qgroup in btrfs has its hierarchy like subvolume. One subvolume/snapshot can reach its quota limits if it consumes all the quota assigned to it or any of the parent qgroup(s).

Also for snapshot, it consumes no quota initially since all its data shares with its parent, so only modification in snapshot consumes quota.

Every subvolume/snapshot will have its own qgroup with id '''0/&lt;subvolume id&gt;''' upon creating, but can be later destroyed by '''btrfs qgroup destroy''' command.

'''Note:''' If the qgroup of a subvolume is destroyed, quota about the subvolume will not be functional until qgroup '''0/&lt;subvolume id&gt;''' is created again.

==SUBCOMMAND==

; '''assign''' &lt;src&gt; &lt;dst&gt; &lt;path&gt;
: Assign qgroup &lt;src&gt; as the child qgroup of &lt;dst&gt; in the btrfs filesystem identified by &lt;path&gt;.
; '''remove''' &lt;src&gt; &lt;dst&gt; &lt;path&gt;
: Remove the relationship between child qgroup &lt;src&gt; and parent qgroup &lt;dst&gt; in the btrfs filesystem identified by &lt;path&gt;.
; '''create''' &lt;qgroupid&gt; &lt;path&gt;
: Create a subvolume quota group. <br /> For the '''0/&lt;subvolume id&gt;''' qgroup, a qgroup can be created even before the subvolume created.
; '''destroy''' &lt;qgroupid&gt; &lt;path&gt;
: Destroy a qgroup. <br /> If a qgroup is no isolated,which means it is a parent or child qgroup, it can’t be destroyed.
; '''show''' [options] &lt;path&gt;
: Show all qgroups in the btrfs filesystem identified by &lt;path&gt;. <br /><code>Options</code><br />
:; -p
:: print parent qgroup id.
:; -c
:: print child qgroup id.
:; -r
:: print max referenced size of qgroup.
:; -e
:: print max exclusive size of qgroup.
:; -F
:: list all qgroups which impact the given path(include ancestral qgroups)
:; -f
:: list all qgroups which impact the given path(exclude ancestral qgroups)
:; --sort=[+/-]&lt;attr&gt;[,[+/-]&lt;attr&gt;]…
:: list qgroups in order of &lt;attr&gt;. <br /> &lt;attr&gt; can be one or more of qgroupid,rfer,excl,max_rfer,max_excl. <br /> Prefix '+' means ascending order and '-' means descending order of &lt;attr&gt;. If no prefix is given, use ascending order by default. <br /> If multiple &lt;attr&gt;s is given, use comma to separate.
; '''limit''' [options] &lt;size&gt;|none [&lt;qgroupid&gt;] &lt;path&gt;
: Limit the size of a qgroup to &lt;size&gt; or no limit in the btrfs filesystem identified by &lt;path&gt;. <br /> If &lt;qgroupid&gt; is not given, qgroup of the subvolume identified by &lt;path&gt; is used if possible.

==EXIT STATUS==

'''btrfs qgroup''' returns a zero exist status if it succeeds. Non zero is returned in case of failure.

==AVAILABILITY==

'''btrfs''' is part of btrfs-progs. Please refer to the btrfs wiki http://btrfs.wiki.kernel.org for further details.

==SEE ALSO==

[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]], [[Manpage/btrfs-subvolume|btrfs-subvolume(8)]], [[Manpage/btrfs-quota|btrfs-quota(8)]],


[[Category:Manpage]]