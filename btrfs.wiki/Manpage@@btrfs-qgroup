=btrfs-qgroup(8) Manual Page=
{{GeneratedManpage
|name=btrfs-qgroup}}

==NAME==

btrfs-qgroup - control the quota group of a btrfs filesystem

==SYNOPSIS==

'''btrfs qgroup''' &lt;subcommand&gt; &lt;args&gt;

==DESCRIPTION==

'''btrfs qgroup''' is used to control quota group (qgroup) of a btrfs filesystem.

'''Note:''' To use qgroup you need to enable quota first using '''btrfs quota enable''' command.

'''Warning:''' Qgroup is not stable yet and will impact performance in current mainline kernel (v3.14 so far).

==QGROUP==

Quota groups or qgroup in btrfs make a tree hierarchy, the leaf qgroups are attached to subvolumes. The size limits are set per qgroup and apply when any limit is reached in tree that contains a given subvolume.

The limit sare separated between shared and exclusive and reflect the extent ownership. For example a fresh snapshot shares almost all the blocks with the original subvolume, new writes to either subvolume will raise towards the exclusive limit.

The qgroup identifiers conform to '''level/id''' where level 0 is reserved to the qgroups associated with subvolumes. Such qgroups are created automatically.

The qgroup hierarchy is built by commands '''create''' and '''assign'''.

'''Note:''' If the qgroup of a subvolume is destroyed, quota about the subvolume will not be functional until qgroup '''0/&lt;subvolume id&gt;''' is created again.

==SUBCOMMAND==

; '''assign''' [options] &lt;src&gt; &lt;dst&gt; &lt;path&gt;
: Assign qgroup &lt;src&gt; as the child qgroup of &lt;dst&gt; in the btrfs filesystem identified by &lt;path&gt;. <br /><code>Options</code><br />
:; --rescan
:: Automatically schedule quota rescan if the new qgroup assignment leads to quota inconsistency.
:; --no-rescan
:: Explicitly ask not to do a rescan.
; '''create''' &lt;qgroupid&gt; &lt;path&gt;
: Create a subvolume quota group. <br /> For the '''0/&lt;subvolume id&gt;''' qgroup, a qgroup can be created even before the subvolume created.
; '''destroy''' &lt;qgroupid&gt; &lt;path&gt;
: Destroy a qgroup. <br /> If a qgroup is no isolated,which means it is a parent or child qgroup, it can’t be destroyed.
; '''limit''' [options] &lt;size&gt;|none [&lt;qgroupid&gt;] &lt;path&gt;
: Limit the size of a qgroup to &lt;size&gt; or no limit in the btrfs filesystem identified by &lt;path&gt;. <br /> If &lt;qgroupid&gt; is not given, qgroup of the subvolume identified by &lt;path&gt; is used if possible. <br /><code>Options</code><br />
:; -c
:: limit amount of data after compression. This is the default, it is currently not possible to turn off this option. <br />
:; -e
:: limit space exclusively assigned to this qgroup.
; '''remove''' &lt;src&gt; &lt;dst&gt; &lt;path&gt;
: Remove the relationship between child qgroup &lt;src&gt; and parent qgroup &lt;dst&gt; in the btrfs filesystem identified by &lt;path&gt;.
; '''show''' [options] &lt;path&gt;
: Show all qgroups in the btrfs filesystem identified by &lt;path&gt;. <br /><code>Options</code><br />
:; -p
:: print parent qgroup id.
:; -c
:: print child qgroup id.
:; -r
:: print limit of referenced size of qgroup.
:; -e
:: print limit of exclusive size of qgroup.
:; -F
:: list all qgroups which impact the given path(include ancestral qgroups)
:; -f
:: list all qgroups which impact the given path(exclude ancestral qgroups)
:; --raw
:: raw numbers in bytes, without the '''B''' suffix.
:; --human-readable
:: print human friendly numbers, base 1024, this is the default
:; --iec
:: select the 1024 base for the following options, according to the IEC standard.
:; --si
:: select the 1000 base for the following options, according to the SI standard.
:; --kbytes
:: show sizes in KiB, or kB with --si.
:; --mbytes
:: show sizes in MiB, or MB with --si.
:; --gbytes
:: show sizes in GiB, or GB with --si.
:; --tbytes
:: show sizes in TiB, or TB with --si.
:; --sort=[+/-]&lt;attr&gt;[,[+/-]&lt;attr&gt;]…
:: list qgroups in order of &lt;attr&gt;. <br /> &lt;attr&gt; can be one or more of qgroupid,rfer,excl,max_rfer,max_excl. <br /> Prefix '+' means ascending order and '-' means descending order of &lt;attr&gt;. If no prefix is given, use ascending order by default. <br /> If multiple &lt;attr&gt;s is given, use comma to separate.

==EXIT STATUS==

'''btrfs qgroup''' returns a zero exit status if it succeeds. Non zero is returned in case of failure.

==AVAILABILITY==

'''btrfs''' is part of btrfs-progs. Please refer to the btrfs wiki http://btrfs.wiki.kernel.org for further details.

==SEE ALSO==

[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]], [[Manpage/btrfs-subvolume|btrfs-subvolume(8)]], [[Manpage/btrfs-quota|btrfs-quota(8)]],

[[Category:Manpage]]