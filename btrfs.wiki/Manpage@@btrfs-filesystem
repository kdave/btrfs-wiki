
=btrfs-filesystem(8) Manual Page=
{{GeneratedManpage}}


==NAME==

btrfs-filesystem - control btrfs filesystem

==SYNOPSIS==

'''btrfs filesystem''' &lt;subcommand&gt; &lt;args&gt;

==DESCRIPTION==

'''btrfs filesystem''' is used to do the filesystem level control jobs, including all the regular filesystem operations like setting/getting label, resizing, defragment.

==SUBCOMMAND==

; '''df''' &lt;path&gt; [&lt;path&gt;…]
: Show space usage information for a mount point.
; '''show''' [--mounted|--all-devices|&lt;path&gt;|&lt;uuid&gt;|&lt;device&gt;|&lt;label&gt;]
: Show the btrfs filesystem with some additional info. <br /> If no option nor &lt;path&gt;|&lt;uuid&gt;|&lt;device&gt;|&lt;label&gt; is passed, btrfs shows information of all the btrfs filesystem both mounted and unmounted. If '''--mounted''' is passed, it would probe btrfs kernel to list mounted btrfs filesystem(s); If '''--all-devices''' is passed, all the devices under /dev are scanned; otherwise the devices list is extracted from the /proc/partitions file.
; '''sync''' &lt;path&gt;
: Force a sync for the filesystem identified by &lt;path&gt;.
; '''defragment''' [options] &lt;file&gt;|&lt;dir&gt; [&lt;file&gt;|&lt;dir&gt;…]
: Defragment file data and/or directory metadata '''online'''. <br /> If '''-r''' is passed, files in dir will be defragmented recursively. The start position and the number of bytes to defragment can be specified by start and len using '''-s''' and '''-l''' options below. Any extent bigger than threshold given by '''-t''' option, will be considered already defragged. Use 0 to take the kernel default, and use 1 to say every single extent must be rewritten. You can also turn on compression in defragment operations. <br /><code>Options</code><br />
:; -v
:: be verbose
:; -c
:: compress file contents while defragmenting
:; -r
:: defragment files recursively
:; -f
:: flush filesystem after defragmenting
:; -s &lt;start&gt;
:: defragment only from byte &lt;start&gt; onward
:; -l &lt;len&gt;
:: defragment only up to &lt;len&gt; bytes
:; -t &lt;size&gt;
:: defragment only files at least &lt;size&gt; bytes big <br /> For &lt;start&gt;, &lt;len&gt;, &lt;size&gt; it is possible to append a suffix like '''k''' for 1 KBytes, '''m''' for 1 MBytes… <br />'''Warning:''' defragmenting with kernels up to 2.6.37 will unlink COW-ed copies of data, don’t use it if you use snapshots, have de-duplicated your data or made copies with <code>cp --reflink</code>.

; '''resize''' [&lt;devid&gt;<nowiki>:</nowiki>][+/-]&lt;size&gt;[gkm]|[&lt;devid&gt;<nowiki>:</nowiki>]max &lt;path&gt;
: Resize a filesystem identified by &lt;path&gt; for the underlying device devid '''online'''.<br /> The devid can be found with '''btrfs filesystem show''' and defaults to 1 if not specified. The &lt;size&gt; parameter specifies the new size of the filesystem. If the prefix + or - is present the size is increased or decreased by the quantity &lt;size&gt;. If no units are specified, the unit of the &lt;size&gt; parameter defaults to bytes. Optionally, the size parameter may be suffixed by one of the following units designators: 'K', 'M', or 'G', kilobytes, megabytes, or gigabytes, respectively. <br /> If 'max' is passed, the filesystem will occupy all available space on the device devid. <br /> The resize command does not manipulate the size of underlying partition. If you wish to enlarge/reduce a filesystem, you must make sure you can expand the partition before enlarging the filesystem and shrink the partition after reducing the size of the filesystem. This can done using [http://man7.org/linux/man-pages/man8/fdisk.8.html fdisk(8)] or [http://man7.org/linux/man-pages/man8/parted.8.html parted(8)] to delete the existing partition and recreate it with the new desired size. When recreating the partition make sure to use the same starting disk cylinder as before.
; '''label''' [&lt;dev&gt;|&lt;mountpoint&gt;] [&lt;newlabel&gt;]
: Show or update the label of a filesystem. <br /> [&lt;device&gt;|&lt;mountpoint&gt;] is used to identify the filesystem. If a newlabel optional argument is passed, the label is changed. <br />'''Note:''' the maximum allowable length shall be less than 256 chars

==EXIT STATUS==

'''btrfs filesystem''' returns a zero exist status if it succeeds. Non zero is returned in case of failure.

==AVAILABILITY==

'''btrfs''' is part of btrfs-progs. Please refer to the btrfs wiki http://btrfs.wiki.kernel.org for further details.

==SEE ALSO==

[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]],


[[Category:Manpage]]