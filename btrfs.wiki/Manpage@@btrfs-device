=btrfs-device(8) manual page=
{{GeneratedManpage
|name=btrfs-device}}

==NAME==
btrfs-device - control btrfs devices

==SYNOPSIS==

<p><b>btrfs device</b> <em>&lt;subcommand&gt;</em> <em>&lt;args&gt;</em></p>
==DESCRIPTION==

<p><b>btrfs device</b> is used to control the btrfs devices, since btrfs can be used
across several devices, <b>btrfs device</b> is used for multiple device management.</p>
==DEVICE MANAGEMENT==

<p>Btrfs filesystem is capable to manage multiple devices.</p>
<p>Btrfs filesystem uses different profiles to manage different RAID level, and
use balance to rebuild chunks, also devices can be added/removed/replace
online.</p>
<dl>
<dt>
Profile
<dd>
<p>
Btrfs filesystem uses data/metadata profiles to manage allocation/duplication
mechanism.<br/>
Profiles like RAID level can be assigned to data and metadata separately.
</p>
<p>See [[Manpage/mkfs.btrfs|mkfs.btrfs(8)]] for more details.</p>

<dt>
RAID level
<dd>
<p>
Btrfs filesystem supports most of the standard RAID level: 0/1/5/6/10.<br/>
RAID levels can be assigned at mkfs time or online.
</p>
<p>See [[Manpage/mkfs.btrfs|mkfs.btrfs(8)]] for mkfs time RAID level assign and [[Manpage/btrfs-balance|btrfs-balance(8)]] for
online RAID level assign.</p>
<blockquote><b>Note:</b>
Since btrfs is under heavy development especially the RAID5/6 support,
it is <b>highly</b> recommended to read the follow btrfs wiki page to get more
updated details on RAID5/6:<br/>
https://btrfs.wiki.kernel.org/index.php/RAID56</blockquote>

<dt>
Balance
<dd>
<p>
[[Manpage/btrfs-balance|btrfs-balance(8)]] subcommand can be used to balance or rebuild chunks to the
desired profile.
</p>
<p>Due to the fact that balance can rebuild/recovery chunks according to its RAID
duplication if possible, so when using RAID1/5/6/10 with some devices failed
and you just added a new device to btrfs using [[Manpage/btrfs-device|btrfs-device(8)]], you should
run [[Manpage/btrfs-balance|btrfs-balance(8)]] to rebuild the chunks.</p>
<p>See [[Manpage/btrfs-balance|btrfs-balance(8)]] for more details.</p>

<dt>
Device add/remove/replace
<dd>
<p>
Device can be added/removed using [[Manpage/btrfs-device|btrfs-device(8)]] subcommand and replaced
using [[Manpage/btrfs-replace|btrfs-replace(8)]].
</p>
<p>When device is removed or replaced, btrfs will do the chunk rebuild if needed.</p>
<p>See [[Manpage/btrfs-replace|btrfs-replace(8)]] man page for more details on device replace.</p>

</dl>
==SUBCOMMAND==

<dl>
<dt>
<b>add</b> [-Kf] <em>&lt;dev&gt;</em> [<em>&lt;dev&gt;</em>&#8230;] <em>&lt;path&gt;</em>
<dd>
<p>
Add device(s) to the filesystem identified by <em>&lt;path&gt;</em>.
</p>
<p>If applicable, a whole device discard (TRIM) operation is performed.</p>
<p><tt>Options</tt></p>
<dl>
<dt>
-K|--nodiscard
<dd>
<p>
do not perform discard by default
</p>

<dt>
-f|--force
<dd>
<p>
force overwrite of existing filesystem on the given disk(s)
</p>

</dl>

<dt>
<b>remove</b> <em>&lt;dev&gt;</em>|<em>&lt;devid&gt;</em> [<em>&lt;dev&gt;</em>|<em>&lt;devid&gt;</em>&#8230;] <em>&lt;path&gt;</em>
<dd>
<p>
Remove device(s) from a filesystem identified by <em>&lt;path&gt;</em>.
</p>

<dt>
<b>delete</b> <em>&lt;dev&gt;</em>|<em>&lt;devid&gt;</em> [<em>&lt;dev&gt;</em>|<em>&lt;devid&gt;</em>&#8230;] <em>&lt;path&gt;</em>
<dd>
<p>
Alias of remove kept for backward compatibility
</p>

<dt>
<b>ready</b> <em>&lt;device&gt;</em>
<dd>
<p>
Check device to see if it has all of it&#8217;s devices in cache for mounting.
</p>

<dt>
<b>scan</b> [(--all-devices|-d)|<em>&lt;device&gt;</em> [<em>&lt;device&gt;</em>&#8230;]]
<dd>
<p>
Scan devices for a btrfs filesystem.
</p>
<p>If one or more devices are passed, these are scanned for a btrfs filesystem.
If no devices are passed, btrfs uses block devices containing btrfs
filesystem as listed by blkid.
Finally, <em>--all-devices</em> or <em>-d</em> is the deprecated option. If it is passed,
its behavior is the same as if no devices are passed.</p>

<dt>
<b>stats</b> [-z] <em>&lt;path&gt;</em>|<em>&lt;device&gt;</em>
<dd>
<p>
Read and print the device IO stats for all mounted devices of the filesystem
identified by <em>&lt;path&gt;</em> or for a single <em>&lt;device&gt;</em>.
</p>
<p><tt>Options</tt></p>
<dl>
<dt>
-z
<dd>
<p>
Reset stats to zero after reading them.
</p>

</dl>

<dt>
<b>usage</b> [options] <em>&lt;path&gt;</em> [<em>&lt;path&gt;</em>&#8230;]
<dd>
<p>
Show detailed information about internal allocations in devices.
</p>
<p><tt>Options</tt></p>
<dl>
<dt>
-b|--raw
<dd>
<p>
raw numbers in bytes, without the <em>B</em> suffix
</p>

<dt>
-h|--human-readable
<dd>
<p>
print human friendly numbers, base 1024, this is the default
</p>

<dt>
-H
<dd>
<p>
print human friendly numbers, base 1000
</p>

<dt>
--iec
<dd>
<p>
select the 1024 base for the following options, according to the IEC standard
</p>

<dt>
--si
<dd>
<p>
select the 1000 base for the following options, according to the SI standard
</p>

<dt>
-k|--kbytes
<dd>
<p>
show sizes in KiB, or kB with --si
</p>

<dt>
-m|--mbytes
<dd>
<p>
show sizes in MiB, or MB with --si
</p>

<dt>
-g|--gbytes
<dd>
<p>
show sizes in GiB, or GB with --si
</p>

<dt>
-t|--tbytes
<dd>
<p>
show sizes in TiB, or TB with --si
</p>

</dl>

</dl>
<p>If conflicting options are passed, the last one takes precedence.</p>
==EXIT STATUS==

<p><b>btrfs device</b> returns a zero exit status if it succeeds. Non zero is
returned in case of failure.</p>
==AVAILABILITY==

<p><b>btrfs</b> is part of btrfs-progs.
Please refer to the btrfs wiki http://btrfs.wiki.kernel.org for
further details.</p>
==SEE ALSO==

<p>[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]],
[[Manpage/btrfs-replace|btrfs-replace(8)]],
[[Manpage/btrfs-balance|btrfs-balance(8)]]</p>
[[Category:Manpage]]