=btrfstune(8) manual page=
{{GeneratedManpage
|name=btrfstune}}

==NAME==
btrfstune - tune various filesystem parameters

==SYNOPSIS==

<p><b>btrfstune</b> [options] <em>&lt;dev&gt;</em> [<em>&lt;dev&gt;</em>&#8230;]</p>
==DESCRIPTION==

<p><b>btrfstune</b> can be used to enable, disable or set various filesystem
parameters. The filesystem must be unmounted.</p>
<p>The common usecase is to enable features that were not enabled at mkfs time.
Please make sure that you have kernel support for the features.  You can find a
complete list of features and kernel version of their introduction at
https://btrfs.wiki.kernel.org/index.php/Changelog#By_feature .</p>
==OPTIONS==

<dl>
<dt>
-S <em>&lt;0|1&gt;</em>
<dd>
<p>
Enable seeding on a given device. Value 1 will enable seeding, 0 will disable it.<br/>
A seeding filesystem is forced to be mounted read-only. A new device can be added
to the filesystem and will capture all writes keeping the seeding device intact.
</p>

<dt>
-r
<dd>
<p>
Enable extended inode refs (hardlink limit per file in a directory is 65536),
enabled by mkfs feature <em>extref</em>. Since kernel 3.7.
</p>

<dt>
-x
<dd>
<p>
Enable skinny metadata extent refs (more efficient representation of extents),
enabled by mkfs feature <em>skinny-metadata</em>. Since kernel 3.10.
</p>

<dt>
-n
<dd>
<p>
Enable no-holes feature (more efficient representation of file holes), enabled
by mkfs feature <em>no-holes</em>. Since kernel 3.14.
</p>

<dt>
-f
<dd>
<p>
Allow dangerous changes, e.g. clear the seeding flag or change fsid. Make sure
that you are aware of the dangers.
</p>

<dt>
-u
<dd>
<p>
Change fsid to a randomly generated UUID or continue previous fsid change
operation in case it was interrupted.
</p>

<dt>
-U <em>&lt;UUID&gt;</em>
<dd>
<p>
Change fsid to <em>UUID</em>.
</p>
<p>The <em>UUID</em> should be a 36 bytes string in [http://man7.org/linux/man-pages/man3/printf.3.html printf(3)] format
<em>"%08x-%04x-%04x-%04x-%012x"</em>.
If there is a previous unfinished fsid change, it will continue only if the
<em>UUID</em> matches the unfinished one or if you use the option <em>-u</em>.</p>

</dl>
<blockquote><b>Warning:</b>
Cancelling or interrupting a UUID change operation will make the
filesystem temporarily unmountable.  To fix it, rerun <em>btrfstune -u</em> to restore
the UUID and let it complete.</blockquote>
<blockquote><b>Warning:</b>
Clearing the seeding flag on a device may be dangerous.
If a previously-seeding device is changed, all filesystems that used that
device will become unmountable. Setting the seeding flag back will not fix
that.<br/>
A valid usecase is <em>seeding device as a base image</em>. Clear the seeding
flag, update the filesystem and make it seeding again, provided that it&#8217;s OK
to throw away all filesystems built on top of the previous base.</blockquote>
==EXIT STATUS==

<p><b>btrfstune</b> returns 0 if no error happened, 1 otherwise.</p>
==COMPATIBILITY NOTE==

<p>This tool exists for historical reasons but is still in use today.  The
functionality is about to be merged to the main tool someday and <b>btrfstune</b>
will become deprecated and removed afterwards.</p>
==SEE ALSO==

<p>[[Manpage/mkfs.btrfs|mkfs.btrfs(8)]]</p>
[[Category:Manpage]]